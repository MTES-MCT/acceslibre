{% extends "compte/base.html" %}

{% load static %}

{% block page_title %}Mes challenges{% endblock %}
{% block robots %}noindex, nofollow{% endblock %}

{% block compte_content %}
  <h1 class="h3 mb-3">Mes challenges</h1>

  <p>
    <i aria-hidden="true" class="icon icon-info-circled"></i>
    Les challenges sur lesquels vous êtes inscrit.
  </p>

  <ul class="list-group">
    {% for challenge in pager %}
    <li class="list-group-item d-lg-flex justify-content-between align-items-center shadow-sm">
      <div class="flex-fill">
        <div class="font-weight-bold">
          <a href="{{ challenge.get_absolute_url }}">
            {{ challenge.nom }}
          </a>
        </div>
        <address class="mb-0">
          <small class="text-muted">Du {{ challenge.start_date|date:"d F Y" }} au {{ challenge.end_date|date:"d F Y" }} inclus</small>
        </address>
        <div>
          <small class="text-success">
            Inscrit depuis le {{ request.user.inscriptions.last.inscription_date|date:"d F Y" }}
          </small>
        </div>
      </div>
      <div class="flex-fill text-right">
          <a class="btn btn-outline-primary" target="_blank" rel="noopener noreferrer" href="{{ challenge.get_absolute_url }}">
            Voir le classement
          </a>
      </div>
    </li>
    {% empty %}
    <li class="list-group-item">La liste est vide.
      Inscrivez vous sans attendre à un challenge et gagner de nombreux lots.<a class="btn btn-outline-primary" href="{% url 'challenges' %}"> Voir les challenges</a></li>
    {% endfor %}
  </ul>
  {% include "common/pager.html" with pager=pager pager_base_url=pager_base_url %}
{% endblock %}
