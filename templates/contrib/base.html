{% extends "editorial/base.html" %}

{% load static %}

{% block page_title %}Renseigner un établissement{% endblock%}

{% block javascript_extras %}
<script src="{% static "vendor/selectWoo-1.0.8/js/select2.min.js" %}"></script>
<script src="{% static "vendor/selectWoo-1.0.8/js/i18n/fr.js" %}"></script>
<script src="{% static "dist/main.js" %}"></script>
{% endblock %}

{% block editorial_content %}
<div class="row">
  <div class="col-md-9 order-last" id="content">
    {% block contrib_content %}{% endblock %}
  </div>
  <nav class="col-md-3 mb-3">
    <div class="d-md-none" id="step-navigation">
      <label for="step-select" class="font-weight-bold">Navigation</label>
      <select id="step-select" class="form-control" onchange="location=$(this).val()+'#step-navigation'">
        <option {% if erp %}value="{% url "contrib_edit_infos" erp_slug=erp.slug %}"{% else %}value="{% url "contrib_start" %}"{% endif %}
          {% if step == 1 %}selected{% endif %}>
          {% if step > 1 %}[ok]{% endif %}
          Informations
        </option>
        <option {% if erp %}value="{% url "contrib_transport" erp_slug=erp.slug %}"{% else %}disabled{% endif %}
          {% if step == 2 %}selected{% endif %}>
          {% if step > 2 %}[ok]{% endif %}
          Venir dans l'établissement
        </option>
        <option {% if erp %}value="{% url "contrib_exterieur" erp_slug=erp.slug %}"{% else %}disabled{% endif %}
          {% if step == 3 %}selected{% endif %}>
          {% if step > 3 %}[ok]{% endif %}
          Atteindre l'entrée
        </option>
        <option {% if erp %}value="{% url "contrib_entree" erp_slug=erp.slug %}"{% else %}disabled{% endif %}
          {% if step == 4 %}selected{% endif %}>
          {% if step > 4 %}[ok]{% endif %}
          Entrée
        </option>
        <option {% if erp %}value="{% url "contrib_accueil" erp_slug=erp.slug %}"{% else %}disabled{% endif %}
          {% if step == 5 %}selected{% endif %}>
          {% if step > 5 %}[ok]{% endif %}
          Accueil
        </option>
        <option {% if erp %}value="{% url "contrib_sanitaires" erp_slug=erp.slug %}"{% else %}disabled{% endif %}
          {% if step == 6 %}selected{% endif %}>
          {% if step > 6 %}[ok]{% endif %}
          Sanitaires
        </option>
        <option {% if erp %}value="{% url "contrib_labellisation" erp_slug=erp.slug %}"{% else %}disabled{% endif %}
          {% if step == 7 %}selected{% endif %}>
          {% if step > 7 %}[ok]{% endif %}
          Labellisation
        </option>
        <option {% if erp %}value="{% url "contrib_commentaire" erp_slug=erp.slug %}"{% else %}disabled{% endif %}
          {% if step == 8 %}selected{% endif %}>
          {% if step > 8 %}[ok]{% endif %}
          Commentaire
        </option>
        <option {% if erp and erp.user == request.user %}value="{% url "contrib_publication" erp_slug=erp.slug %}"{% else %}disabled{% endif %}
          {% if step == 9 %}selected{% endif %}>
          Publication
        </option>
      </select>
    </div>
    <ul class="d-none d-md-block StepProgress">
      <li class="StepProgress-item{% if step == 1 %} current{% endif %}{% if step > 1 %} is-done{% endif %}">
        {% if erp %}
        <a href="{% url "contrib_edit_infos" erp_slug=erp.slug %}">Informations</a>
        {% else %}
        <a href="{% url "contrib_start" %}">Trouver un établissement</a>
        {% endif %}
      </li>
      <li class="StepProgress-item{% if step == 2 %} current{% endif %}{% if step > 2 %} is-done{% endif %}">
        {% if erp %}
        <a href="{% url "contrib_transport" erp_slug=erp.slug %}">Venir dans l'établissement</a>
        {% else %}
        Venir dans l'établissement
        {% endif %}
      </li>
      <li class="StepProgress-item{% if step == 3 %} current{% endif %}{% if step > 3 %} is-done{% endif %}">
        {% if erp %}
        <a href="{% url "contrib_exterieur" erp_slug=erp.slug %}">Atteindre l'entrée</a>
        {% else %}
        Atteindre l'entrée
        {% endif %}
      </li>
      <li class="StepProgress-item{% if step == 4 %} current{% endif %}{% if step > 4 %} is-done{% endif %}">
        {% if erp %}
        <a href="{% url "contrib_entree" erp_slug=erp.slug %}">Entrée</a>
        {% else %}
        Entrée
        {% endif %}
      </li>
      <li class="StepProgress-item{% if step == 5 %} current{% endif %}{% if step > 5 %} is-done{% endif %}">
        {% if erp %}
        <a href="{% url "contrib_accueil" erp_slug=erp.slug %}">Accueil</a>
        {% else %}
        Accueil
        {% endif %}
      </li>
      <li class="StepProgress-item{% if step == 6 %} current{% endif %}{% if step > 6 %} is-done{% endif %}">
        {% if erp %}
        <a href="{% url "contrib_sanitaires" erp_slug=erp.slug %}">Sanitaires</a>
        {% else %}
        Sanitaires
        {% endif %}
      </li>
      <li class="StepProgress-item{% if step == 7 %} current{% endif %}{% if step > 7 %} is-done{% endif %}">
        {% if erp %}
        <a href="{% url "contrib_labellisation" erp_slug=erp.slug %}">Labellisation</a>
        {% else %}
        Labellisation
        {% endif %}
      </li>
      <li class="StepProgress-item{% if step == 8 %} current{% endif %}{% if step > 8 %} is-done{% endif %}">
        {% if erp %}
        <a href="{% url "contrib_commentaire" erp_slug=erp.slug %}">Commentaire</a>
        {% else %}
        Commentaire
        {% endif %}
      </li>
      <li class="StepProgress-item{% if step == 9 %} current{% endif %}">
        {% if erp and erp.user == request.user %}
        <a href="{% url "contrib_publication" erp_slug=erp.slug %}">Publication</a>
        {% else %}
        <span class="text-muted">Publication</span>
        {% endif %}
      </li>
    </ul>
  </nav>
</div>
{% endblock %}
