{% load i18n %}
<nav aria-label="Étapes d'ajout d'un établissement" role="navigation">
    <div class="d-md-none" id="step-navigation">
        <label for="step-select" class="font-weight-bold">{% translate "Navigation" %}</label>
        <select id="step-select"
                class="form-control"
                onchange="location=$(this).val()+'#step-navigation'">
            <option {% if erp %}value="{% url 'contrib_edit_infos' erp_slug=erp.slug %}"{% else %}disabled{% endif %}
                    {% if step == 1 %}selected{% endif %}>
                {% if step > 1 %}[ok]{% endif %}
                {% translate "Informations" %}
            </option>
            {% if not erp.user or erp.user == request.user %}
                <option {% if erp %}value="{% url 'contrib_a_propos' erp_slug=erp.slug %}"{% else %}disabled{% endif %}
                        {% if step == 2 %}selected{% endif %}>
                    {% if step > 2 %}[ok]{% endif %}
                    {% translate "À propos" %}
                </option>
            {% endif %}
            <option {% if erp %}value="{% url 'contrib_transport' erp_slug=erp.slug %}"{% else %}disabled{% endif %}
                    {% if step == 3 %}selected{% endif %}>
                {% if step > 3 %}[ok]{% endif %}
                {% translate "Accès" %}
            </option>
            <option {% if erp %}value="{% url 'contrib_exterieur' erp_slug=erp.slug %}"{% else %}disabled{% endif %}
                    {% if step == 4 %}selected{% endif %}>
                {% if step > 4 %}[ok]{% endif %}
                {% translate "Extérieur" %}
            </option>
            <option {% if erp %}value="{% url 'contrib_entree' erp_slug=erp.slug %}"{% else %}disabled{% endif %}
                    {% if step == 5 %}selected{% endif %}>
                {% if step > 5 %}[ok]{% endif %}
                {% translate "Entrée" %}
            </option>
            <option {% if erp %}value="{% url 'contrib_accueil' erp_slug=erp.slug %}"{% else %}disabled{% endif %}
                    {% if step == 6 %}selected{% endif %}>
                {% if step > 6 %}[ok]{% endif %}
                {% translate "Accueil et prestations" %}
            </option>
            <option {% if erp %}value="{% url 'contrib_commentaire' erp_slug=erp.slug %}"{% else %}disabled{% endif %}
                    {% if step == 7 %}selected{% endif %}>
                {% if step > 7 %}[ok]{% endif %}
                {% translate "Informations complémentaires" %}
            </option>
        </select>
    </div>
    <ul class="d-none d-md-block StepProgress">
        <li class="StepProgress-item{% if step == 1 %} current{% endif %}{% if step > 1 %} is-done{% endif %}"
            aria-label="{% if step == 1 %}en cours{% endif %}{% if step > 1 %} validé{% endif %}">
            {% if erp %}
                <a title="Informations ({% if step == 1 %}en cours{% endif %}{% if step > 1 %} validé{% endif %})"
                   href="{% url 'contrib_edit_infos' erp_slug=erp.slug %}">{% translate "Informations" %}</a>
            {% else %}
                {% translate "Informations" %}
            {% endif %}
        </li>
        {% if not erp.user or erp.user == request.user %}
            <li class="StepProgress-item{% if step == 2 %} current{% endif %}{% if step > 2 %} is-done{% endif %}"
                aria-label="{% if step == 2 %}en cours{% endif %}{% if step > 2 %} validé{% endif %}">
                {% if erp %}
                    <a title="À propos {% if step == 2 %}(Étape en cours){% endif %}{% if step > 2 %}(Étape validée){% endif %}"
                       href="{% url 'contrib_a_propos' erp_slug=erp.slug %}">{% translate "À propos" %}</a>
                {% else %}
                    {% translate "À propos" %}
                {% endif %}
            </li>
        {% endif %}
        <li class="StepProgress-item{% if step == 3 %} current{% endif %}{% if step > 3 %} is-done{% endif %}"
            aria-label="{% if step == 3 %}en cours{% endif %}{% if step > 3 %} validé{% endif %}">
            {% if erp %}
                <a title="Accès {% if step == 3 %}(Étape en cours){% endif %}{% if step > 3 %}(Étape validée){% endif %}"
                   href="{% url 'contrib_transport' erp_slug=erp.slug %}">{% translate "Accès" %}</a>
            {% else %}
                {% translate "Accès" %}
            {% endif %}
        </li>
        <li class="StepProgress-item{% if step == 4 %} current{% endif %}{% if step > 4 %} is-done{% endif %}"
            aria-label="{% if step == 4 %}en cours{% endif %}{% if step > 4 %} validé{% endif %}">
            {% if erp %}
                <a title="Extérieur {% if step == 4 %}(Étape en cours){% endif %}{% if step > 4 %}(Étape validée){% endif %}"
                   href="{% url 'contrib_exterieur' erp_slug=erp.slug %}">{% translate "Extérieur" %}</a>
            {% else %}
                {% translate "Extérieur" %}
            {% endif %}
        </li>
        <li class="StepProgress-item{% if step == 5 %} current{% endif %}{% if step > 5 %} is-done{% endif %}"
            aria-label="{% if step == 5 %}en cours{% endif %}{% if step > 5 %} validé{% endif %}">
            {% if erp %}
                <a title="Entrée {% if step == 5 %}(Étape en cours){% endif %}{% if step > 5 %}(Étape validée){% endif %}"
                   href="{% url 'contrib_entree' erp_slug=erp.slug %}">{% translate "Entrée" %}</a>
            {% else %}
                {% translate "Entrée" %}
            {% endif %}
        </li>
        <li class="StepProgress-item{% if step == 6 %} current{% endif %}{% if step > 6 %} is-done{% endif %}"
            aria-label="{% if step == 6 %}en cours{% endif %}{% if step > 6 %} validé{% endif %}">
            {% if erp %}
                <a title="Accueil {% if step == 6 %}(Étape en cours){% endif %}{% if step > 6 %}(Étape validée){% endif %}"
                   href="{% url 'contrib_accueil' erp_slug=erp.slug %}">{% translate "Accueil et prestations" %}</a>
            {% else %}
                {% translate "Accueil et prestations" %}
            {% endif %}
        </li>
        <li class="StepProgress-item{% if step == 7 %} current{% endif %}{% if step > 7 %} is-done{% endif %}"
            aria-label="{% if step == 7 %}en cours{% endif %}{% if step > 7 %} validé{% endif %}">
            {% if erp %}
                <a title="Informations complémentaires {% if step == 7 %}(Étape en cours){% endif %}{% if step > 7 %}(Étape validée){% endif %}"
                   href="{% url 'contrib_commentaire' erp_slug=erp.slug %}">{% translate "Informations complémentaires" %}</a>
            {% else %}
                {% translate "Informations complémentaires" %}
            {% endif %}
        </li>
    </ul>
</nav>
